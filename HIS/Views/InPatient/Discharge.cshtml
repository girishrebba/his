@model HIS.DischargeModel
@{
    Layout = null;
}
@using (Html.BeginForm("Discharge", "InPatient", FormMethod.Post, new { onsubmit = "return SubmitDischargeForm(this)" }))
{
    @Html.HiddenFor(model => model.ENMRNO)
<div class="form-horizontal">
    <div class="col-lg-12">
        <div class="panel-body" style="padding-top:0px;">
            @if (Model.RoomChargeTable != null)
        {
            <div class="table-responsive">
                <table class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>Room</th>
                            <th>Bed</th>
                            <th>Days</th>
                            <th>Day Charge</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@Model.RoomChargeTable.RoomName</td>
                            <td>@Model.RoomChargeTable.BedName</td>
                            <td>@Model.RoomChargeTable.OccupiedDays</td>
                            <td>@Model.RoomChargeTable.CostPerDay.ToString("0.00")</td>
                            <td>@(Model.RoomChargeTable.CostPerDay * Model.RoomChargeTable.OccupiedDays)</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="4" align="right">Total:</td>
                            <td colspan="1" align="left" id="roomTotal">@(Model.RoomChargeTable.CostPerDay * Model.RoomChargeTable.OccupiedDays)</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
    }
        </div>
        <div class="panel-body" style="padding-top:0px;">
            @if (Model.FeeCollectionTable != null && Model.FeeCollectionTable.Count > 0)
        {
            <div class="table-responsive">
                <table class="table table-striped table-bordered" style="width:100%">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Purpose</th>
                            <th>Mode</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var p in Model.FeeCollectionTable)
                        {
                    <tr>
                        <td>@p.PaidDateDisplay</td>
                        <td>@p.Purpose</td>
                        <td>@p.PayModeDisplay</td>
                        <td>@p.Amount.ToString("0.00")</td>
                    </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3" align="right">Total:</td>
                            <td colspan="1" align="left" id="feeTotal">@Model.FeeCollectionTable.Sum(i => i.Amount).ToString("0.00")</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
    }
        </div>
        <div class="panel-body col-sm-offset-5" style="padding-top:0px;">
            <table class="table table-striped table-bordered" style="width:1000%">
                <tbody>
                    <tr>
                        <td align="right">Paid Amount:</td>
                        <td>@ViewBag.TotalFee.ToString("0.00")</td>
                    </tr>
                    <tr>
                        <td align="right">Room Charge:</td>
                        <td>@ViewBag.RoomFee.ToString("0.00")</td>
                    </tr>
                    <tr><td align="right">Amount to be Paid:</td><td>@ViewBag.PayAmount.ToString("0.00")</td></tr>
                    <tr><td align="right">Refund:</td><td>@ViewBag.Refund.ToString("0.00")</td></tr>
                </tbody>
            </table>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.DischargeSummary, "Discharge Summary:")
            @Html.TextAreaFor(model => model.DischargeSummary, new { @class = "form-control rounded-0", @rows = 5, @autofocus = "true" })
            @Html.ValidationMessageFor(model => model.DischargeSummary)
        </div>
        <div class="form-group">
            <div class="col-sm-offset-3">
                <input type="submit" value="Discharge" class="btn btn-primary" />
                <input type="reset" value="Reset" class="btn" />
            </div>
        </div>
    </div>
</div>
}
