@model List<HIS.PatientTest>
@{
                /**/

                Layout = null;
}
<style>
    .ui-widget-content a {
        color: #fff !important
    }

    .table > thead > tr > th {
        text-transform: none;
        font-weight: bold;
    }

    .ui-dialog {
        top: 60px !important;
    }
</style>
@using HIS.HtmlHelpers
@using (Html.BeginForm("PatientTests", "OutPatient", FormMethod.Post, new { id = "ptForm", onsubmit = "return SubmitPatientTestForm(this)" }))
{
    <div class="form-horizontal">
        @Html.HiddenFor(model => model[0].ENMRNO, new { @id = "ENMRNO" })
        <div class="col-lg-8">
            <div class="form-group">
                @Html.LabelFor(model => model[0].ENMRNO, "ENMRNO:", new { @class = "control-label col-md-2" })
                <div class="col-sm-4 lableDisplay">
                    @Html.DisplayFor(model => model[0].ENMRNO, new { htmlAttributes = new { @class = "form-control" } })
                </div>
                @Html.LabelFor(model => model[0].VisitName, "Visit:", new { @class = "control-label col-md-2" })
                <div class="col-sm-4 lableDisplay">
                    @Html.DisplayFor(model => model[0].VisitName, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model[0].DoctorName, "Doctor:", new { @class = "control-label col-md-2" })
                <div class="col-sm-4 lableDisplay">
                    @Html.DisplayFor(model => model[0].DoctorName, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered" id="ptTable">
                        <thead>
                            <tr>
                                <th style="width:25%">Test</th>
                                <th style="width:15%">Date</th>
                                <th style="width:10%">Values</th>
                                <th style="width:40%">Impression</th>
                                <th style="width:10%">Upload File</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var p in Model)
                            {
                                <tr>
                                    <td style="display:none">@p.TestID</td>
                                    <td>@p.TestName</td>
                                    <td>
                                        <div id="date-popup" class="input-group date">
                                            @Html.EditorFor(model => p.TestDate, new { htmlAttributes = new { Value = Html.DateFormat(p.TestDate), @class = "datepicker form-control", @placeholder = "" } })
                                            <span class="btndatepicker input-group-addon"><i class="fa fa-calendar"></i></span>
                                        </div>
                                    </td>
                                    <td>@Html.EditorFor(model => p.RecordedValues, new { htmlAttributes = new { @class = "form-control deliverQty" } })</td>
                                    <td>@Html.EditorFor(model => p.TestImpression, new { htmlAttributes = new { @class = "form-control" } })</td>
                                    <td></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="form-group">
                    <div class="col-md-3 col-md-offset-5">
                        <input type="submit" value="Submit" id="btnSubmit" class="btn btn-primary" />
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<script type="text/javascript">
    $('.datepicker').datepicker({
        keyboardNavigation: false,
        forceParse: false,
        todayHighlight: true,
        todayBtn: false,
        format: "mm/dd/yyyy"
    });

    $('.btndatepicker').click(function () {
        var id = $(this).closest('tr').find('.datepicker');
        $(id).datepicker('show');
    });

</script>